generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id         String      @id @default(cuid())
  email      String      @unique
  name       String?
  portfolios Portfolio[]
  Budget     Budget?
}

model Budget {
  id             String           @id @default(cuid())
  name           String
  description    String?
  goal           Float?
  userId         String           @unique
  user           User             @relation(fields: [userId], references: [id])
  BudgetCategory BudgetCategory[]
}

enum BudgetCategoryType {
  INCOME
  NECESSITY
  SAVINGS
  WANTS
  GIFTS
}

model BudgetCategory {
  id       String             @id @default(cuid())
  name     String
  budgetId String
  type     BudgetCategoryType
  budget   Budget             @relation(fields: [budgetId], references: [id])
  goal     Float?
}

enum PortfolioType {
  EMERGENCY
  SAVINGS
  RETIREMENT
  RISK
}

model Portfolio {
  id             String           @id @default(cuid())
  name           String
  description    String?
  goal           Float?
  type           PortfolioType
  userId         String
  user           User             @relation(fields: [userId], references: [id])
  PortfolioAsset PortfolioAsset[]
}

model PortfolioAsset {
  id             String    @id @default(cuid())
  name           String
  description    String?
  percentageGoal Float?
  portfolioId    String
  portfolio      Portfolio @relation(fields: [portfolioId], references: [id])
}
